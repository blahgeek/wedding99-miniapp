<view class="container">
  <block wx:if="{{ !uiConfig.huntHtml }}">
    <p class="title">在婚礼现场找到相应二维码扫描即可答题寻宝</p>
  </block>
  <block wx:else>
    <mp-html content="{{ uiConfig.huntHtml }}"></mp-html>
  </block>

  <view wx:if="{{ !huntState.name }}">
    <view class="weui-cells weui-cells_after-title">
      <view class="weui-cell weui-cell_input">
        <view class="weui-cell__bd">
          <input class="weui-input"
                 confirm-type="go"
                 bindconfirm="submitNameAndStart"
                 placeholder="{{ uiConfig.huntNameInputPlaceholder }}" />
        </view>
      </view>
    </view>
  </view>

  <view wx:else>
    <button type="primary" bindtap="scanCode">{{ uiConfig.huntScanButton }}</button>
    <button bindtap="userReset">重新开始</button>

    <view class="task-grid-container">
    <l-grid show-border="{{ true }}">
      <block wx:for="{{ huntTasks }}" wx:key="id">
        <l-grid-item data-id="{{ item.id }}" key="{{ item.id }}" slot="{{ item.id }}"
                     bind:linitemtap="openTask">
          <block wx:if="{{ huntState.taskStatus[item.id] }}">
            <mp-icon wx:if="{{ huntState.taskStatus[item.id] === 'correct' }}"
                     size="{{ 30 }}" icon="done2" color="green" />
            <mp-icon wx:if="{{ huntState.taskStatus[item.id] === 'incorrect' }}"
                     size="{{ 30 }}" icon="close" color="red" />
            <mp-icon wx:if="{{ huntState.taskStatus[item.id] === 'unlocked' }}"
                     size="{{ 30 }}" icon="help" />
          </block>
          <block wx:else>
            <mp-icon wx:if="{{ item.defaultLocked }}"
                     size="{{ 30 }}" icon="lock" />
            <mp-icon wx:else
                     size="{{ 30 }}" icon="help" />
          </block>
          <view class="task-name">
            {{ item.name || item.id }}
          </view>
        </l-grid-item>
      </block>
    </l-grid>
    </view>
  </view>

</view>
